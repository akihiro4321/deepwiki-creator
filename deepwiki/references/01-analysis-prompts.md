# DeepWiki: 構造分析・アーキテクチャ把握フォーマット

[SKILL.md](../SKILL.md) の **Phase 1: 構造分析** において、LLMがコードベースの全体像を把握し、Phase 2 の入力となる「アーキテクチャ概要メモ」を作成する際のフォーマットとルール。

---

## 1. 言語ルール要件（全フェーズ共通）
基本ルール：ページタイトル・概要・本文は**日本語**で記述する。ただし以下は**英語**のまま維持する。
- ページタイトル・ファイル名（例: `1.1-architecture-overview.md`）
- コード内のクラス名・関数名・変数名
- ファイルパス、コマンド
- Mermaid ダイアグラムのノードラベル（実際のコード要素名を用いる）
- Sources 行におけるファイル参照記述

---

## 2. アーキテクチャ概要メモの出力フォーマット

ソースコード走査（Step 1b）後に作成するメモは以下の形式で整えること。

```text
## アーキテクチャ概要メモ

### モジュール構成
- [モジュールA]: [責務の1行説明] (主要クラス: X, Y, Z / 複雑度: 高)
- [モジュールB]: [責務の1行説明] (主要クラス: P, Q / 複雑度: 中)
  - サブモジュール: [名前] (主要クラス: R)

### 依存関係グラフ
エントリーポイント → ModuleA → ModuleB
                   → ModuleC → ModuleD
                              → ModuleB (共有依存)

### 検出された設計パターン
- Factory Pattern: ToolFactory (tools/factory.ts)
- Observer Pattern: EventBus (core/events.ts)
- Middleware: Pipeline (core/pipeline.ts)

### 複雑なモジュール（ページ分割候補）
- tools/ : クラス8個、メソッド45個 → 2-3ページに分割推奨
- core/state/ : StateMachine + 5つの State → 専用ページ推奨

### 主要機能（ユーザー視点）
- [機能A]: [何ができるか] (関連モジュール: X, Y)
- [機能B]: [何ができるか] (関連モジュール: Z)
```
